{"ts":1377369716479,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var mysql = require('mysql')\n, fs = require('fs');\n\nvar client = mysql.createConnection({\n    host : '211.189.127.226',\n    port : '3306',\n    database : 'streaming',\n    user : 'swssm',\n    password : 'swssm'\n});\n\nexports.eventEmit = new process.EventEmitter();\n/*\n * GET home page.\n */\nexports.index = function(req, res){\n    client.query('SELECT * FROM room ORDER BY recommend DESC, number ASC', function(error, result, fields) {\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        var room = result;\n        res.render('page/index', { title: '메인화면::::', whoami: req.session.user, room: room });\n    });\n};\nexports.index2 = function(req, res){\n    client.query('SELECT * FROM room ORDER BY recommend DESC, number ASC', function(error, result, fields) {\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        var room = result;\n        res.render('page/new_index', { title: '메인화면::::', whoami: req.session.user, room: room });\n    });\n};\n\nexports.login = function(req, res){\n    var id = req.body.id;\n    var password = req.body.password;\n    client.query('SELECT * FROM member WHERE id=? AND password=?', [id, password] , function(error, result, fields) {\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        if(result.length == 0) {\n            console.log(\"쿼리 결과 없음\");\n            res.render('page/failed_login', { title: '메인화면::::', whoami: req.session.user });\n        }\n        else {\n            req.session.userId = result[0].id;\n            req.session.user = result[0].name;\n            \n            client.query('SELECT * FROM room ORDER BY recommend DESC, number ASC', function(error, result2, fields) {\n                if(error) {\n                    console.log(\"MySQL Failure.\");\n                    console.log(error);\n                } \n                var room = result2;\n                res.render('page/index', { title: '메인화면::::', whoami: req.session.user, room: room });\n            });\n        }\n    });\n};\n\nexports.logout = function(req, res){\n    delete req.session.user;\n    client.query('SELECT * FROM room ORDER BY recommend DESC, number ASC', function(error, result, fields) {\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        var room = result;\n        res.render('page/index', { title: '메인화면::::', whoami: req.session.user, room: room });\n    });\n};\n\nexports.joinMember = function(req, res){\n        res.render('page/join_member', { title: '방송화면::::', whoami: req.session.user, userid: req.session.userId });\n};\n\n\nexports.broadcast = function(req, res){\n    //exports.eventEmit.emit('makeRoom');\n    if(typeof req.session.user == 'undefined') {\n        res.render('page/request_login', { title: '로그인이 필요합니다::::', whoami: req.session.user });\n    }\n    else {\n        var roomName = req.query.room;\n        var roomNumber = req.query.number;\n        \n        client.query('SELECT * FROM room WHERE number=?', [roomNumber], function(error, result, fields) {\n            if(error) {\n                console.log(\"MySQL Failure.\");\n                console.log(error);\n            } \n            var room = result;\n            res.render('page/broadcast', { title: '방송화면::::', whoami: req.session.user, userid: req.session.userId, roomName: roomName, roomNumber: roomNumber, room: room });\n        });\n    }\n};\n\nexports.recommend = function(req, res){\n    if(typeof req.session.user == 'undefined') {\n        res.render('page/request_login', { title: '로그인이 필요합니다::::', whoami: req.session.user });\n    }\n    else {\n        \n        client.query('SELECT * FROM recommend WHERE room=? and id=?', [parseInt(req.query.room), req.query.id], function(error, result, fields) {\n            if(error) {\n                console.log(\"MySQL Failure.SELECT\");\n                console.log(error);\n            } \n            if(result.length === 0) {\n                client.query(\"INSERT INTO recommend (room, id) VALUES (?, ?)\", [parseInt(req.query.room), req.query.id], function(error, result2, fields) { \n                    if(error) {\n                        console.log(\"MySQL Failure.INSERT\");\n                        console.log(error);\n                    }\n                    else {\n                        var update = true;\n                        client.query(\"UPDATE room SET recommend=recommend+1 WHERE number=?\", [parseInt(req.query.room)], function(error, result3, fields) {\n                            if(error) {\n                                update = false;\n                                console.log(\"MySQL Failure.UPDATE\");\n                                console.log(error);\n                            }\n                            else {\n                                update = true;\n                                res.render('success_recommend', { title: '방송화면::::', whoami: req.session.user, userid: req.session.userId });\n                            }\n                        });\n                        if(update === false) {\n                            res.render('fail_recommend', { title: '방송화면::::', whoami: req.session.user, userid: req.session.userId });  \n                        }\n                    }\n                });\n            }\n            else {\n                res.render('aready_recommend', { title: '방송화면::::', whoami: req.session.user, userid: req.session.userId });  \n            }\n        });\n    }\n};\n\n\nexports.mobile_broadcast = function(req, res){\n    var roomNumber = req.query.roomNumber;\n    res.render('mobile/broadcast', { title: '방송화면::::',  roomNumber: roomNumber });\n};\n\n\n\n\n/* android function */\nexports.appLogin = function(req, res){\n    res.set('Content-Type', 'text/html');\n    console.log(req.body.id);\n    var id = req.body.id;\n    var password = req.body.password;\n    client.query(\"SELECT password FROM member WHERE id='\" + id + \"'\", function(error, result, fields) {\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        console.log(\"id = \" + id);\n        console.log(\"password = \" + password);\n        var check;\n        if(result.length === 0) {\n            console.log(\"result.length=0\");\n            check = false;\n            res.render('DB/appLogin', { title: '방송화면::::', check: check });\n        }\n        else {\n            var user_password = result[0].password;\n            if(password == user_password) {\n                check = true;\n                res.render('DB/appLogin', { title: '방송화면::::', check: check });\n            }\n            else {\n                console.log(\"password No match\");\n                check = false;\n                res.render('DB/appLogin', { title: '방송화면::::', check: check });\n            }\n        }\n    });\n};\nexports.appJoin = function(req, res){\n    res.set('Content-Type', 'text/html');\n    var id = req.body.id;\n    var password = req.body.password;\n    var name = req.body.name;\n    client.query(\"INSERT INTO member(id, password, name) VALUES (?, ?, ?)\", [id, password, name], function(error, result, fields) {\n        var check;\n        \n        check = false;\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        else {\n            check = true;\n            res.render('DB/appJoin', { title: '방송화면::::', check: check });\n        }\n        res.render('DB/appJoin', { title: '방송화면::::', check: check });\n    });\n};\nexports.appRoomList = function(req, res){\n    res.set('Content-Type', 'application/json');\n    client.query(\"SELECT * FROM room ORDER BY recommend DESC, number ASC\", function(error, result, fields) {\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        \n        var check;\n        if(result.length === 0) {\n            console.log(\"result.length=0\");\n            check = false;\n            res.render('DB/appRoomList', { title: '방송화면::::', check: check });\n        }\n        else {\n            //var objMap = {\"JObject\" : result}; \n            //var json = JSON.stringify(objMap);\n            res.render('DB/appRoomList', { title: '방송화면::::', check: JSON.stringify(result) });\n        }\n    });\n};\nexports.appMakeRoom = function(req, res){\n    res.set('Content-Type', 'text/html');\n    var name = req.body.name;\n    var isPublic = req.body.isPublic;\n    var password = req.body.password;\n    var id = req.body.id;\n    var date = req.body.date;\n    client.query(\"INSERT INTO room(name, is_public, recommend, date, id, password) VALUES (?, ?, 0, ?, ?, ?)\", [name, isPublic, date, id, password] , function(error, result, fields) {\n        var check;\n        \n        check = false;\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        else {\n            check = true;\n            client.query(\"SELECT * FROM room WHERE name=? AND is_public=? AND recommend=0 AND date=? AND id=? AND password=?\", [name, isPublic, date, id, password], function(error, result, fields) {\n                if(error) {\n                    console.log(\"MySQL Failure.\");\n                    console.log(error);\n                } \n                res.render('DB/appMakeRoom', { title: '방송화면::::', check: check, room: result[0].number });\n            });\n        }\n        if(check === false){\n            res.render('DB/appMakeRoom', { title: '방송화면::::', check: check });\n        }\n    });\n};\nexports.appDeleteRoom = function(req, res){\n    res.set('Content-Type', 'application/json');\n    var roomNumber = req.body.number;\n    client.query(\"DELETE FROM room WHERE number=?\", [roomNumber], function(error, result, fields) {\n        var check;\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        else {\n            check = true;\n            res.render('DB/appDeleteRoom', { title: '방송화면::::', check: check });\n        }\n        if(check === false){\n            res.render('DB/appDeleteRoom', { title: '방송화면::::', check: check });\n        }\n    });\n};\nexports.appCheckRecommend = function(req, res){\n    res.set('Content-Type', 'application/json');\n    var number = req.body.number;\n    var id = req.body.id;\n    client.query('SELECT * FROM recommend WHERE room=? and id=?', [number, id], function(error, result, fields) {\n        var check = true;\n        if(error) {\n            console.log(\"MySQL Failure.SELECT\");\n            console.log(error);\n        } \n        if(result.length === 0) {\n            client.query(\"INSERT INTO recommend (room, id) VALUES (?, ?)\", [number, id], function(error, result2, fields) { \n                if(error) {\n                    console.log(\"MySQL Failure.INSERT\");\n                    console.log(error);\n                }\n                else {\n                    check = false;\n                res.render('DB/appCheckRecommend', { title: '방송화면::::', check: check });\n                }\n            });\n        }\n        else {\n            check = true;\n            res.render('DB/appCheckRecommend', { title: '방송화면::::', check: check });\n        }\n    });\n};\nexports.appInsertRecommend = function(req, res){\n    res.set('Content-Type', 'application/json');\n    var number = req.body.number;\n    var id = req.body.id;\n    client.query(\"INSERT INTO recommend (room, id) VALUES (?, ?)\", [number, id], function(error, result, fields) { \n        var check = true;\n        if(error) {\n            console.log(\"MySQL Failure.INSERT\");\n            console.log(error);\n            check = false;\n            res.render('DB/appInsertRecommend', { title: '방송화면::::', check: check });\n        }\n        else {\n            check = true;\n            res.render('DB/appInsertRecommend', { title: '방송화면::::', check: check });\n        }\n    });\n};\nexports.appIncreaseRecommend = function(req, res){\n    res.set('Content-Type', 'application/json');\n    var number = req.body.number;\n    var id = req.body.id;\n    client.query(\"UPDATE room SET recommend=recommend+1 WHERE number=?\", [number, id], function(error, result, fields) {\n        var update = true;\n        if(error) {\n            update = false;\n            console.log(\"MySQL Failure.UPDATE\");\n            console.log(error);\n            res.render('appIncreaseRecommend', { title: '방송화면::::', check: update });\n        }\n        else {\n            update = true;\n            res.render('appIncreaseRecommend', { title: '방송화면::::', check: update });\n        }\n        });\n};\n\nexports.appSearchRoom = function(req, res){\n    res.set('Content-Type', 'application/json');\n    var keyword = req.body.keyword;\n    client.query(\"SELECT * FROM room WHERE name like '%\" + keyword + \"%'\", function(error, result, fields) {\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        \n        var check;\n        if(result.length === 0) {\n            console.log(\"result.length=0\");\n            check = false;\n            res.render('DB/appSearchRoom', { title: '방송화면::::', check: check });\n        }\n        else {\n            //var objMap = {\"JObject\" : result}; \n            //var json = JSON.stringify(objMap);\n            res.render('DB/appSearchRoom', { title: '방송화면::::', check: JSON.stringify(result) });\n        }\n    });\n};\n"]],"start1":0,"start2":0,"length1":0,"length2":13337}]],"length":13337}
{"contributors":[],"silentsave":false,"ts":1377369746297,"patch":[[{"diffs":[[0,"   }\n    });\n};\n"],[1,"/*"],[0,"exports.appMakeR"]],"start1":8266,"start2":8266,"length1":32,"length2":34},{"diffs":[[0,"    }\n    });\n};"],[1,"*/"],[0,"\nexports.appDele"]],"start1":9494,"start2":9494,"length1":32,"length2":34}]],"length":13341,"saved":false}
{"ts":1377369759290,"patch":[[{"diffs":[[0,"\n};\n"],[-1,"/*exports.appMakeRoom = function(req, res){\n    res.set('Content-Type', 'text/html');\n    var name = req.body.name;\n    var isPublic = req.body.isPublic;\n    var password = req.body.password;\n    var id = req.body.id;\n    var date = req.body.date;\n    client.query(\"INSERT INTO room(name, is_public, recommend, date, id, password) VALUES (?, ?, 0, ?, ?, ?)\", [name, isPublic, date, id, password] , function(error, result, fields) {\n        var check;\n        \n        check = false;\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        else {\n            check = true;\n            client.query(\"SELECT * FROM room WHERE name=? AND is_public=? AND recommend=0 AND date=? AND id=? AND password=?\", [name, isPublic, date, id, password], function(error, result, fields) {\n                if(error) {\n                    console.log(\"MySQL Failure.\");\n                    console.log(error);\n                } \n                res.render('DB/appMakeRoom', { title: '방송화면::::', check: check, room: result[0].number });\n            });\n        }\n        if(check === false){\n            res.render('DB/appMakeRoom', { title: '방송화면::::', check: check });\n        }\n    });\n};*/"],[0,"\nexp"]],"start1":8278,"start2":8278,"length1":1238,"length2":8}]],"length":12111,"saved":false}
{"contributors":[],"silentsave":false,"ts":1377369801872,"patch":[[{"diffs":[[0,"   }\n    });\n};\n"],[1,"exports.appMakeRoom = function(req, res){\n    res.set('Content-Type', 'text/html');\n    var name = req.body.name;\n    var isPublic = req.body.isPublic;\n    var password = req.body.password;\n    var id = req.body.id;\n    var date = req.body.date;\n    client.query(\"INSERT INTO room(name, is_public, recommend, date, id, password) VALUES (?, ?, 0, ?, ?, ?)\", [name, isPublic, date, id, password] , function(error, result, fields) {\n        var check;\n        \n        check = false;\n        if(error) {\n            console.log(\"MySQL Failure.\");\n            console.log(error);\n        } \n        else {\n            check = true;\n            client.query(\"SELECT * FROM room WHERE name=? AND is_public=? AND recommend=0 AND date=? AND id=? AND password=?\", [name, isPublic, date, id, password], function(error, result, fields) {\n                if(error) {\n                    console.log(\"MySQL Failure.\");\n                    console.log(error);\n                } \n                res.render('DB/appMakeRoom', { title: '방송화면::::', check: check, room: result[0].number });\n            });\n        }\n        if(check === false){\n            res.render('DB/appMakeRoom', { title: '방송화면::::', check: check });\n        }\n    });\n};"],[0,"\nexports.appDele"]],"start1":8266,"start2":8266,"length1":32,"length2":1258}]],"length":13337,"saved":false}
{"ts":1377369974216,"patch":[[{"diffs":[[0,"'mysql')"],[1,"\r"],[0,"\n, fs = "]],"start1":20,"start2":20,"length1":16,"length2":17},{"diffs":[[0,"e('fs');"],[-1,"\n"],[1,"\r\n\r"],[0,"\nvar cli"]],"start1":43,"start2":43,"length1":17,"length2":19},{"diffs":[[0,"ection({"],[1,"\r"],[0,"\n    hos"]],"start1":84,"start2":84,"length1":16,"length2":17},{"diffs":[[0,"27.226',"],[1,"\r"],[0,"\n    por"]],"start1":115,"start2":115,"length1":16,"length2":17},{"diffs":[[0," '3306',"],[1,"\r"],[0,"\n    dat"]],"start1":135,"start2":135,"length1":16,"length2":17},{"diffs":[[0,"eaming',"],[1,"\r"],[0,"\n    use"]],"start1":164,"start2":164,"length1":16,"length2":17},{"diffs":[[0,"'swssm',"],[1,"\r"],[0,"\n    pas"]],"start1":185,"start2":185,"length1":16,"length2":17},{"diffs":[[0,"ssm'"],[1,"\r"],[0,"\n});"],[-1,"\n"],[1,"\r\n\r"],[0,"\nexp"]],"start1":213,"start2":213,"length1":13,"length2":16},{"diffs":[[0,"itter();"],[1,"\r"],[0,"\n/*"],[1,"\r"],[0,"\n * GET "]],"start1":265,"start2":265,"length1":19,"length2":21},{"diffs":[[0,"age."],[1,"\r"],[0,"\n */"],[1,"\r"],[0,"\nexp"]],"start1":292,"start2":292,"length1":12,"length2":14},{"diffs":[[0,"ction(req, res){"],[1,"\r"],[0,"\n    client.quer"]],"start1":322,"start2":322,"length1":32,"length2":33},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        if(erro"]],"start1":432,"start2":432,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":453,"start2":453,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n            con"]],"start1":497,"start2":497,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n        } \n    "]],"start1":530,"start2":530,"length1":32,"length2":33},{"diffs":[[0,"or);\r\n        } "],[1,"\r"],[0,"\n        var roo"]],"start1":542,"start2":542,"length1":32,"length2":33},{"diffs":[[0,"r room = result;"],[1,"\r"],[0,"\n        res.ren"]],"start1":570,"start2":570,"length1":32,"length2":33},{"diffs":[[0,"om: room });"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[1,"\r"],[0,"\nexports.ind"]],"start1":670,"start2":670,"length1":35,"length2":38},{"diffs":[[0,"n(req, res){"],[1,"\r"],[0,"\n    client."]],"start1":721,"start2":721,"length1":24,"length2":25},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        if(erro"]],"start1":827,"start2":827,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":848,"start2":848,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n            con"]],"start1":892,"start2":892,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n        } \n    "]],"start1":925,"start2":925,"length1":32,"length2":33},{"diffs":[[0,"or);\r\n        } "],[1,"\r"],[0,"\n        var roo"]],"start1":937,"start2":937,"length1":32,"length2":33},{"diffs":[[0,"r room = result;"],[1,"\r"],[0,"\n        res.ren"]],"start1":965,"start2":965,"length1":32,"length2":33},{"diffs":[[0,"om: room });"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[-1,"\n"],[1,"\r\n\r"],[0,"\nexports.log"]],"start1":1069,"start2":1069,"length1":36,"length2":40},{"diffs":[[0,"ction(req, res){"],[1,"\r"],[0,"\n    var id = re"]],"start1":1117,"start2":1117,"length1":32,"length2":33},{"diffs":[[0,"d = req.body.id;"],[1,"\r"],[0,"\n    var passwor"]],"start1":1144,"start2":1144,"length1":32,"length2":33},{"diffs":[[0,"q.body.password;"],[1,"\r"],[0,"\n    client.quer"]],"start1":1183,"start2":1183,"length1":32,"length2":33},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        if(erro"]],"start1":1302,"start2":1302,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":1323,"start2":1323,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n            con"]],"start1":1367,"start2":1367,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n        } \n    "]],"start1":1400,"start2":1400,"length1":32,"length2":33},{"diffs":[[0,"or);\r\n        } "],[1,"\r"],[0,"\n        if(resu"]],"start1":1412,"start2":1412,"length1":32,"length2":33},{"diffs":[[0,"ngth == 0) {"],[1,"\r"],[0,"\n           "]],"start1":1450,"start2":1450,"length1":24,"length2":25},{"diffs":[[0,"결과 없음\");"],[1,"\r"],[0,"\n       "]],"start1":1492,"start2":1492,"length1":16,"length2":17},{"diffs":[[0,"ion.user });"],[1,"\r"],[0,"\n        }\n "]],"start1":1583,"start2":1583,"length1":24,"length2":25},{"diffs":[[0,"r });\r\n        }"],[1,"\r"],[0,"\n        else {\n"]],"start1":1590,"start2":1590,"length1":32,"length2":33},{"diffs":[[0,"\r\n        else {"],[1,"\r"],[0,"\n            req"]],"start1":1606,"start2":1606,"length1":32,"length2":33},{"diffs":[[0,"esult[0].id;"],[1,"\r"],[0,"\n           "]],"start1":1658,"start2":1658,"length1":24,"length2":25},{"diffs":[[0,"ult[0].name;"],[1,"\r"],[0,"\n           "]],"start1":1706,"start2":1706,"length1":24,"length2":25},{"diffs":[[0,"e;\r\n            "],[1,"\r"],[0,"\n            cli"]],"start1":1716,"start2":1716,"length1":32,"length2":33},{"diffs":[[0,"sult2, fields) {"],[1,"\r"],[0,"\n               "]],"start1":1835,"start2":1835,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n               "]],"start1":1864,"start2":1864,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n               "]],"start1":1916,"start2":1916,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n               "]],"start1":1957,"start2":1957,"length1":32,"length2":33},{"diffs":[[0,"              } "],[1,"\r"],[0,"\n               "]],"start1":1977,"start2":1977,"length1":32,"length2":33},{"diffs":[[0,"result2;"],[1,"\r"],[0,"\n       "]],"start1":2022,"start2":2022,"length1":16,"length2":17},{"diffs":[[0,", room: room });"],[1,"\r"],[0,"\n            });"]],"start1":2118,"start2":2118,"length1":32,"length2":33},{"diffs":[[0,"\n            });"],[1,"\r"],[0,"\n        }\n    }"]],"start1":2135,"start2":2135,"length1":32,"length2":33},{"diffs":[[0,"       }"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[-1,"\n"],[1,"\r\n\r"],[0,"\nexports"]],"start1":2154,"start2":2154,"length1":28,"length2":32},{"diffs":[[0,"n(req, res){"],[1,"\r"],[0,"\n    delete "]],"start1":2203,"start2":2203,"length1":24,"length2":25},{"diffs":[[0,"on.user;"],[1,"\r"],[0,"\n    cli"]],"start1":2237,"start2":2237,"length1":16,"length2":17},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        if(erro"]],"start1":2339,"start2":2339,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":2360,"start2":2360,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n            con"]],"start1":2404,"start2":2404,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n        } \n    "]],"start1":2437,"start2":2437,"length1":32,"length2":33},{"diffs":[[0,"or);\r\n        } "],[1,"\r"],[0,"\n        var roo"]],"start1":2449,"start2":2449,"length1":32,"length2":33},{"diffs":[[0,"r room = result;"],[1,"\r"],[0,"\n        res.ren"]],"start1":2477,"start2":2477,"length1":32,"length2":33},{"diffs":[[0,"room });"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[-1,"\n"],[1,"\r\n\r"],[0,"\nexports"]],"start1":2581,"start2":2581,"length1":28,"length2":32},{"diffs":[[0,"n(req, res){"],[1,"\r"],[0,"\n        res"]],"start1":2634,"start2":2634,"length1":24,"length2":25},{"diffs":[[0,"erId });"],[1,"\r"],[0,"\n};"],[-1,"\n\n"],[1,"\r\n\r"],[0,"\nexports"]],"start1":2756,"start2":2756,"length1":21,"length2":23},{"diffs":[[0,"exports."],[-1,"broadca"],[1,"li"],[0,"st = fun"]],"start1":2772,"start2":2772,"length1":23,"length2":18},{"diffs":[[0,"es){"],[1,"\r"],[0,"\n    "],[-1,"//exports.eventEmit.emit('makeRoom');"],[1,"res.send('방송 리스트 페이지 입니다.');\r\n};\r\n\r\nexports.broadcast = function(req, res){\r"],[0,"\n   "]],"start1":2802,"start2":2802,"length1":50,"length2":90},{"diffs":[[0,"= 'undefined') {"],[1,"\r"],[0,"\n        res.ren"]],"start1":2921,"start2":2921,"length1":32,"length2":33},{"diffs":[[0,"session.user });"],[1,"\r"],[0,"\n    }"],[1,"\r"],[0,"\n    else {\n    "]],"start1":3019,"start2":3019,"length1":38,"length2":40},{"diffs":[[0,"   }\r\n    else {"],[1,"\r"],[0,"\n        var roo"]],"start1":3038,"start2":3038,"length1":32,"length2":33},{"diffs":[[0,"ry.room;"],[1,"\r"],[0,"\n       "]],"start1":3086,"start2":3086,"length1":16,"length2":17},{"diffs":[[0,"uery.number;"],[1,"\r"],[0,"\n        \n  "]],"start1":3126,"start2":3126,"length1":24,"length2":25},{"diffs":[[0,"umber;\r\n        "],[1,"\r"],[0,"\n        client."]],"start1":3132,"start2":3132,"length1":32,"length2":33},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n            if("]],"start1":3239,"start2":3239,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n               "]],"start1":3264,"start2":3264,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n               "]],"start1":3312,"start2":3312,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n            } \n"]],"start1":3349,"start2":3349,"length1":32,"length2":33},{"diffs":[[0,"\r\n            } "],[1,"\r"],[0,"\n            var"]],"start1":3365,"start2":3365,"length1":32,"length2":33},{"diffs":[[0," result;"],[1,"\r"],[0,"\n       "]],"start1":3405,"start2":3405,"length1":16,"length2":17},{"diffs":[[0,"om: room });"],[1,"\r"],[0,"\n        });"]],"start1":3577,"start2":3577,"length1":24,"length2":25},{"diffs":[[0,"     });"],[1,"\r"],[0,"\n    }"],[1,"\r"],[0,"\n};"],[-1,"\n"],[1,"\r\n\r"],[0,"\nexports"]],"start1":3594,"start2":3594,"length1":26,"length2":30},{"diffs":[[0,"n(req, res){"],[1,"\r"],[0,"\n    if(type"]],"start1":3644,"start2":3644,"length1":24,"length2":25},{"diffs":[[0,"ined') {"],[1,"\r"],[0,"\n       "]],"start1":3698,"start2":3698,"length1":16,"length2":17},{"diffs":[[0,"user });"],[1,"\r"],[0,"\n    }"],[1,"\r"],[0,"\n    els"]],"start1":3796,"start2":3796,"length1":22,"length2":24},{"diffs":[[0,"   }\r\n    else {"],[1,"\r"],[0,"\n        \n      "]],"start1":3807,"start2":3807,"length1":32,"length2":33},{"diffs":[[0,"else {\r\n        "],[1,"\r"],[0,"\n        client."]],"start1":3817,"start2":3817,"length1":32,"length2":33},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n            if("]],"start1":3964,"start2":3964,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n               "]],"start1":3989,"start2":3989,"length1":32,"length2":33},{"diffs":[[0,"ailure.SELECT\");"],[1,"\r"],[0,"\n               "]],"start1":4043,"start2":4043,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n            } \n"]],"start1":4080,"start2":4080,"length1":32,"length2":33},{"diffs":[[0,"\r\n            } "],[1,"\r"],[0,"\n            if("]],"start1":4096,"start2":4096,"length1":32,"length2":33},{"diffs":[[0,"result.length =="],[-1,"="],[0," 0) {"],[1,"\r"],[0,"\n               "]],"start1":4129,"start2":4129,"length1":38,"length2":38},{"diffs":[[0,"ult2, fields) { "],[1,"\r"],[0,"\n               "]],"start1":4292,"start2":4292,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n               "]],"start1":4325,"start2":4325,"length1":32,"length2":33},{"diffs":[[0,"ailure.INSERT\");"],[1,"\r"],[0,"\n               "]],"start1":4387,"start2":4387,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n               "]],"start1":4432,"start2":4432,"length1":32,"length2":33},{"diffs":[[0,"               }"],[1,"\r"],[0,"\n               "]],"start1":4455,"start2":4455,"length1":32,"length2":33},{"diffs":[[0,"          else {"],[1,"\r"],[0,"\n               "]],"start1":4483,"start2":4483,"length1":32,"length2":33},{"diffs":[[0,"r update = true;"],[1,"\r"],[0,"\n               "]],"start1":4527,"start2":4527,"length1":32,"length2":33},{"diffs":[[0,"sult3, fields) {"],[1,"\r"],[0,"\n               "]],"start1":4684,"start2":4684,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n               "]],"start1":4725,"start2":4725,"length1":32,"length2":33},{"diffs":[[0," update = false;"],[1,"\r"],[0,"\n               "]],"start1":4774,"start2":4774,"length1":32,"length2":33},{"diffs":[[0,"ailure.UPDATE\");"],[1,"\r"],[0,"\n               "]],"start1":4844,"start2":4844,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n               "]],"start1":4897,"start2":4897,"length1":32,"length2":33},{"diffs":[[0,"               }"],[1,"\r"],[0,"\n               "]],"start1":4928,"start2":4928,"length1":32,"length2":33},{"diffs":[[0,"          else {"],[1,"\r"],[0,"\n               "]],"start1":4964,"start2":4964,"length1":32,"length2":33},{"diffs":[[0,"  update = true;"],[1,"\r"],[0,"\n               "]],"start1":5012,"start2":5012,"length1":32,"length2":33},{"diffs":[[0,"n.userId });"],[1,"\r"],[0,"\n           "]],"start1":5159,"start2":5159,"length1":24,"length2":25},{"diffs":[[0,"               }"],[1,"\r"],[0,"\n               "]],"start1":5186,"start2":5186,"length1":32,"length2":33},{"diffs":[[0,"             });"],[1,"\r"],[0,"\n               "]],"start1":5215,"start2":5215,"length1":32,"length2":33},{"diffs":[[0,"pdate =="],[-1,"="],[0," false) "]],"start1":5261,"start2":5261,"length1":17,"length2":16},{"diffs":[[0,"false) {"],[1,"\r"],[0,"\n       "]],"start1":5270,"start2":5270,"length1":16,"length2":17},{"diffs":[[0,"ion.userId });  "],[1,"\r"],[0,"\n               "]],"start1":5400,"start2":5400,"length1":32,"length2":33},{"diffs":[[0,"               }"],[1,"\r"],[0,"\n               "]],"start1":5427,"start2":5427,"length1":32,"length2":33},{"diffs":[[0,"               }"],[1,"\r"],[0,"\n               "]],"start1":5450,"start2":5450,"length1":32,"length2":33},{"diffs":[[0,"             });"],[1,"\r"],[0,"\n            }\n "]],"start1":5471,"start2":5471,"length1":32,"length2":33},{"diffs":[[0,";\r\n            }"],[1,"\r"],[0,"\n            els"]],"start1":5486,"start2":5486,"length1":32,"length2":33},{"diffs":[[0,"          else {"],[1,"\r"],[0,"\n               "]],"start1":5506,"start2":5506,"length1":32,"length2":33},{"diffs":[[0,"Id });  "],[1,"\r"],[0,"\n       "]],"start1":5642,"start2":5642,"length1":16,"length2":17},{"diffs":[[0," \r\n            }"],[1,"\r"],[0,"\n        });\n   "]],"start1":5649,"start2":5649,"length1":32,"length2":33},{"diffs":[[0," });"],[1,"\r"],[0,"\n    }"],[1,"\r"],[0,"\n};"],[-1,"\n\n"],[1,"\r\n\r\n\r"],[0,"\nexp"]],"start1":5674,"start2":5674,"length1":19,"length2":24},{"diffs":[[0,"n(req, res){"],[1,"\r"],[0,"\n    var roo"]],"start1":5729,"start2":5729,"length1":24,"length2":25},{"diffs":[[0,".roomNumber;"],[1,"\r"],[0,"\n    res.ren"]],"start1":5773,"start2":5773,"length1":24,"length2":25},{"diffs":[[0," });"],[1,"\r"],[0,"\n};"],[-1,"\n\n\n\n"],[1,"\r\n\r\n\r\n\r\n\r"],[0,"\n/* "]],"start1":5866,"start2":5866,"length1":15,"length2":21},{"diffs":[[0,"ction */"],[1,"\r"],[0,"\nexports"]],"start1":5898,"start2":5898,"length1":16,"length2":17},{"diffs":[[0,"ction(req, res){"],[1,"\r"],[0,"\n    res.set('Co"]],"start1":5930,"start2":5930,"length1":32,"length2":33},{"diffs":[[0,"text/html');"],[1,"\r"],[0,"\n    console"]],"start1":5977,"start2":5977,"length1":24,"length2":25},{"diffs":[[0,"eq.body.id);"],[1,"\r"],[0,"\n    var id "]],"start1":6008,"start2":6008,"length1":24,"length2":25},{"diffs":[[0,"d = req.body.id;"],[1,"\r"],[0,"\n    var passwor"]],"start1":6031,"start2":6031,"length1":32,"length2":33},{"diffs":[[0,"dy.password;"],[1,"\r"],[0,"\n    client."]],"start1":6074,"start2":6074,"length1":24,"length2":25},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        if(erro"]],"start1":6175,"start2":6175,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":6196,"start2":6196,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n            con"]],"start1":6240,"start2":6240,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n        } \n    "]],"start1":6273,"start2":6273,"length1":32,"length2":33},{"diffs":[[0,"or);\r\n        } "],[1,"\r"],[0,"\n        console"]],"start1":6285,"start2":6285,"length1":32,"length2":33},{"diffs":[[0,"\" + id);"],[1,"\r"],[0,"\n       "]],"start1":6329,"start2":6329,"length1":16,"length2":17},{"diffs":[[0,"ssword);"],[1,"\r"],[0,"\n       "]],"start1":6377,"start2":6377,"length1":16,"length2":17},{"diffs":[[0,"      var check;"],[1,"\r"],[0,"\n        if(resu"]],"start1":6389,"start2":6389,"length1":32,"length2":33},{"diffs":[[0,"result.length =="],[-1,"="],[0," 0) {"],[1,"\r"],[0,"\n            con"]],"start1":6418,"start2":6418,"length1":38,"length2":38},{"diffs":[[0,"sult.length=0\");"],[1,"\r"],[0,"\n            che"]],"start1":6468,"start2":6468,"length1":32,"length2":33},{"diffs":[[0,"  check = false;"],[1,"\r"],[0,"\n            res"]],"start1":6496,"start2":6496,"length1":32,"length2":33},{"diffs":[[0,"check: check });"],[1,"\r"],[0,"\n        }\n     "]],"start1":6573,"start2":6573,"length1":32,"length2":33},{"diffs":[[0,"k });\r\n        }"],[1,"\r"],[0,"\n        else {\n"]],"start1":6584,"start2":6584,"length1":32,"length2":33},{"diffs":[[0,"\r\n        else {"],[1,"\r"],[0,"\n            var"]],"start1":6600,"start2":6600,"length1":32,"length2":33},{"diffs":[[0,"0].password;"],[1,"\r"],[0,"\n           "]],"start1":6657,"start2":6657,"length1":24,"length2":25},{"diffs":[[0,"sword) {"],[1,"\r"],[0,"\n       "]],"start1":6706,"start2":6706,"length1":16,"length2":17},{"diffs":[[0,"   check = true;"],[1,"\r"],[0,"\n               "]],"start1":6729,"start2":6729,"length1":32,"length2":33},{"diffs":[[0,"check: check });"],[1,"\r"],[0,"\n            }\n "]],"start1":6810,"start2":6810,"length1":32,"length2":33},{"diffs":[[0,";\r\n            }"],[1,"\r"],[0,"\n            els"]],"start1":6825,"start2":6825,"length1":32,"length2":33},{"diffs":[[0,"          else {"],[1,"\r"],[0,"\n               "]],"start1":6845,"start2":6845,"length1":32,"length2":33},{"diffs":[[0,"match\");"],[1,"\r"],[0,"\n       "]],"start1":6904,"start2":6904,"length1":16,"length2":17},{"diffs":[[0,"  check = false;"],[1,"\r"],[0,"\n               "]],"start1":6928,"start2":6928,"length1":32,"length2":33},{"diffs":[[0,"check: check });"],[1,"\r"],[0,"\n            }\n "]],"start1":7009,"start2":7009,"length1":32,"length2":33},{"diffs":[[0,";\r\n            }"],[1,"\r"],[0,"\n        }\n    }"]],"start1":7024,"start2":7024,"length1":32,"length2":33},{"diffs":[[0,"}\r\n        }"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[1,"\r"],[0,"\nexports.app"]],"start1":7039,"start2":7039,"length1":35,"length2":38},{"diffs":[[0,"ction(req, res){"],[1,"\r"],[0,"\n    res.set('Co"]],"start1":7087,"start2":7087,"length1":32,"length2":33},{"diffs":[[0,"', 'text/html');"],[1,"\r"],[0,"\n    var id = re"]],"start1":7130,"start2":7130,"length1":32,"length2":33},{"diffs":[[0,"d = req.body.id;"],[1,"\r"],[0,"\n    var passwor"]],"start1":7157,"start2":7157,"length1":32,"length2":33},{"diffs":[[0,"q.body.password;"],[1,"\r"],[0,"\n    var name = "]],"start1":7196,"start2":7196,"length1":32,"length2":33},{"diffs":[[0,"q.body.name;"],[1,"\r"],[0,"\n    client."]],"start1":7231,"start2":7231,"length1":24,"length2":25},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        var che"]],"start1":7360,"start2":7360,"length1":32,"length2":33},{"diffs":[[0,"      var check;"],[1,"\r"],[0,"\n        \n      "]],"start1":7380,"start2":7380,"length1":32,"length2":33},{"diffs":[[0,"check;\r\n        "],[1,"\r"],[0,"\n        check ="]],"start1":7390,"start2":7390,"length1":32,"length2":33},{"diffs":[[0,"  check = false;"],[1,"\r"],[0,"\n        if(erro"]],"start1":7414,"start2":7414,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":7435,"start2":7435,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n            con"]],"start1":7479,"start2":7479,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n        } \n    "]],"start1":7512,"start2":7512,"length1":32,"length2":33},{"diffs":[[0,"or);\r\n        } "],[1,"\r"],[0,"\n        else {\n"]],"start1":7524,"start2":7524,"length1":32,"length2":33},{"diffs":[[0,"\r\n        else {"],[1,"\r"],[0,"\n            che"]],"start1":7540,"start2":7540,"length1":32,"length2":33},{"diffs":[[0,"   check = true;"],[1,"\r"],[0,"\n            res"]],"start1":7567,"start2":7567,"length1":32,"length2":33},{"diffs":[[0,"check: check });"],[1,"\r"],[0,"\n        }\n     "]],"start1":7643,"start2":7643,"length1":32,"length2":33},{"diffs":[[0,"k });\r\n        }"],[1,"\r"],[0,"\n        res.ren"]],"start1":7654,"start2":7654,"length1":32,"length2":33},{"diffs":[[0,"heck });"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[1,"\r"],[0,"\nexports"]],"start1":7734,"start2":7734,"length1":27,"length2":30},{"diffs":[[0,"ction(req, res){"],[1,"\r"],[0,"\n    res.set('Co"]],"start1":7782,"start2":7782,"length1":32,"length2":33},{"diffs":[[0,"tion/json');"],[1,"\r"],[0,"\n    client."]],"start1":7836,"start2":7836,"length1":24,"length2":25},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        if(erro"]],"start1":7942,"start2":7942,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":7963,"start2":7963,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n            con"]],"start1":8007,"start2":8007,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n        } \n    "]],"start1":8040,"start2":8040,"length1":32,"length2":33},{"diffs":[[0,"or);\r\n        } "],[1,"\r"],[0,"\n        \n      "]],"start1":8052,"start2":8052,"length1":32,"length2":33},{"diffs":[[0,"    } \r\n        "],[1,"\r"],[0,"\n        var che"]],"start1":8062,"start2":8062,"length1":32,"length2":33},{"diffs":[[0,"      var check;"],[1,"\r"],[0,"\n        if(resu"]],"start1":8082,"start2":8082,"length1":32,"length2":33},{"diffs":[[0,".length === 0) {"],[1,"\r"],[0,"\n            con"]],"start1":8117,"start2":8117,"length1":32,"length2":33},{"diffs":[[0,"sult.length=0\");"],[1,"\r"],[0,"\n            che"]],"start1":8162,"start2":8162,"length1":32,"length2":33},{"diffs":[[0,"  check = false;"],[1,"\r"],[0,"\n            res"]],"start1":8190,"start2":8190,"length1":32,"length2":33},{"diffs":[[0,"check: check });"],[1,"\r"],[0,"\n        }\n     "]],"start1":8270,"start2":8270,"length1":32,"length2":33},{"diffs":[[0,"k });\r\n        }"],[1,"\r"],[0,"\n        else {\n"]],"start1":8281,"start2":8281,"length1":32,"length2":33},{"diffs":[[0,"\r\n        else {"],[1,"\r"],[0,"\n            //v"]],"start1":8297,"start2":8297,"length1":32,"length2":33},{"diffs":[[0,"ect\" : result}; "],[1,"\r"],[0,"\n            //v"]],"start1":8348,"start2":8348,"length1":32,"length2":33},{"diffs":[[0,"ringify(objMap);"],[1,"\r"],[0,"\n            res"]],"start1":8398,"start2":8398,"length1":32,"length2":33},{"diffs":[[0,"gify(result) });"],[1,"\r"],[0,"\n        }\n    }"]],"start1":8495,"start2":8495,"length1":32,"length2":33},{"diffs":[[0,";\r\n        }"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[1,"\r"],[0,"\nexports.app"]],"start1":8510,"start2":8510,"length1":35,"length2":38},{"diffs":[[0,"ction(req, res){"],[1,"\r"],[0,"\n    res.set('Co"]],"start1":8562,"start2":8562,"length1":32,"length2":33},{"diffs":[[0,"/html');"],[1,"\r"],[0,"\n    var"]],"start1":8613,"start2":8613,"length1":16,"length2":17},{"diffs":[[0,"dy.name;"],[1,"\r"],[0,"\n    var"]],"start1":8644,"start2":8644,"length1":16,"length2":17},{"diffs":[[0,"sPublic;"],[1,"\r"],[0,"\n    var"]],"start1":8683,"start2":8683,"length1":16,"length2":17},{"diffs":[[0,"dy.password;"],[1,"\r"],[0,"\n    var id "]],"start1":8718,"start2":8718,"length1":24,"length2":25},{"diffs":[[0,"req.body.id;"],[1,"\r"],[0,"\n    var dat"]],"start1":8745,"start2":8745,"length1":24,"length2":25},{"diffs":[[0,"dy.date;"],[1,"\r"],[0,"\n    cli"]],"start1":8780,"start2":8780,"length1":16,"length2":17},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        var che"]],"start1":8957,"start2":8957,"length1":32,"length2":33},{"diffs":[[0,"      var check;"],[1,"\r"],[0,"\n        \n      "]],"start1":8977,"start2":8977,"length1":32,"length2":33},{"diffs":[[0,"check;\r\n        "],[1,"\r"],[0,"\n        check ="]],"start1":8987,"start2":8987,"length1":32,"length2":33},{"diffs":[[0,"  check = false;"],[1,"\r"],[0,"\n        if(erro"]],"start1":9011,"start2":9011,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":9032,"start2":9032,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n            con"]],"start1":9076,"start2":9076,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n        } \n    "]],"start1":9109,"start2":9109,"length1":32,"length2":33},{"diffs":[[0,"or);\r\n        } "],[1,"\r"],[0,"\n        else {\n"]],"start1":9121,"start2":9121,"length1":32,"length2":33},{"diffs":[[0,"\r\n        else {"],[1,"\r"],[0,"\n            che"]],"start1":9137,"start2":9137,"length1":32,"length2":33},{"diffs":[[0,"   check = true;"],[1,"\r"],[0,"\n            cli"]],"start1":9164,"start2":9164,"length1":32,"length2":33},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n               "]],"start1":9364,"start2":9364,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n               "]],"start1":9393,"start2":9393,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n               "]],"start1":9445,"start2":9445,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n               "]],"start1":9486,"start2":9486,"length1":32,"length2":33},{"diffs":[[0,"              } "],[1,"\r"],[0,"\n               "]],"start1":9506,"start2":9506,"length1":32,"length2":33},{"diffs":[[0,"].number });"],[1,"\r"],[0,"\n           "]],"start1":9618,"start2":9618,"length1":24,"length2":25},{"diffs":[[0,"\n            });"],[1,"\r"],[0,"\n        }\n     "]],"start1":9631,"start2":9631,"length1":32,"length2":33},{"diffs":[[0,"  });\r\n        }"],[1,"\r"],[0,"\n        if(chec"]],"start1":9642,"start2":9642,"length1":32,"length2":33},{"diffs":[[0," if(check =="],[-1,"="],[0," false){"],[1,"\r"],[0,"\n           "]],"start1":9667,"start2":9667,"length1":33,"length2":33},{"diffs":[[0,"check: check });"],[1,"\r"],[0,"\n        }\n    }"]],"start1":9751,"start2":9751,"length1":32,"length2":33},{"diffs":[[0,";\r\n        }"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[1,"\r"],[0,"\nexports.app"]],"start1":9766,"start2":9766,"length1":35,"length2":38},{"diffs":[[0,"ction(req, res){"],[1,"\r"],[0,"\n    res.set('Co"]],"start1":9820,"start2":9820,"length1":32,"length2":33},{"diffs":[[0,"lication/json');"],[1,"\r"],[0,"\n    var roomNum"]],"start1":9870,"start2":9870,"length1":32,"length2":33},{"diffs":[[0,"body.number;"],[1,"\r"],[0,"\n    client."]],"start1":9913,"start2":9913,"length1":24,"length2":25},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        var che"]],"start1":10010,"start2":10010,"length1":32,"length2":33},{"diffs":[[0,"      var check;"],[1,"\r"],[0,"\n        if(erro"]],"start1":10030,"start2":10030,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":10051,"start2":10051,"length1":32,"length2":33},{"diffs":[[0,"ySQL Failure.\");"],[1,"\r"],[0,"\n            con"]],"start1":10095,"start2":10095,"length1":32,"length2":33},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n        } \n    "]],"start1":10128,"start2":10128,"length1":32,"length2":33},{"diffs":[[0,"or);\r\n        } "],[1,"\r"],[0,"\n        else {\n"]],"start1":10140,"start2":10140,"length1":32,"length2":33},{"diffs":[[0,"\r\n        else {"],[1,"\r"],[0,"\n            che"]],"start1":10156,"start2":10156,"length1":32,"length2":33},{"diffs":[[0,"   check = true;"],[1,"\r"],[0,"\n            res"]],"start1":10183,"start2":10183,"length1":32,"length2":33},{"diffs":[[0,"check: check });"],[1,"\r"],[0,"\n        }\n     "]],"start1":10265,"start2":10265,"length1":32,"length2":33},{"diffs":[[0,"k });\r\n        }"],[1,"\r"],[0,"\n        if(chec"]],"start1":10276,"start2":10276,"length1":32,"length2":33},{"diffs":[[0,"check =="],[-1,"="],[0," false){"],[1,"\r"],[0,"\n       "]],"start1":10305,"start2":10305,"length1":25,"length2":25},{"diffs":[[0,"check: check });"],[1,"\r"],[0,"\n        }\n    }"]],"start1":10387,"start2":10387,"length1":32,"length2":33},{"diffs":[[0,";\r\n        }"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[1,"\r"],[0,"\nexports.app"]],"start1":10402,"start2":10402,"length1":35,"length2":38},{"diffs":[[0,"ction(req, res){"],[1,"\r"],[0,"\n    res.set('Co"]],"start1":10460,"start2":10460,"length1":32,"length2":33},{"diffs":[[0,"lication/json');"],[1,"\r"],[0,"\n    var number "]],"start1":10510,"start2":10510,"length1":32,"length2":33},{"diffs":[[0,"req.body.number;"],[1,"\r"],[0,"\n    var id = re"]],"start1":10545,"start2":10545,"length1":32,"length2":33},{"diffs":[[0,"d = req.body.id;"],[1,"\r"],[0,"\n    client.quer"]],"start1":10572,"start2":10572,"length1":32,"length2":33},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        var che"]],"start1":10687,"start2":10687,"length1":32,"length2":33},{"diffs":[[0,"ar check = true;"],[1,"\r"],[0,"\n        if(erro"]],"start1":10714,"start2":10714,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":10735,"start2":10735,"length1":32,"length2":33},{"diffs":[[0,"re.SELECT\");"],[1,"\r"],[0,"\n           "]],"start1":10789,"start2":10789,"length1":24,"length2":25},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n        } \n    "]],"start1":10818,"start2":10818,"length1":32,"length2":33},{"diffs":[[0,"    "],[-1,"} \n"],[0,"    "],[-1,"    if(result.length === 0) {\n            client.query(\"INSERT INTO recommend (room, id) VALUES (?, ?)\", [number, id], function(error, result2, fields) { "],[1,"check = false;\r\n            res.render('DB/appCheckRecommend', { title: '방송화면::::', check: check });\r"],[0,"\n   "]],"start1":10840,"start2":10840,"length1":169,"length2":113},{"diffs":[[0,"        "],[1,"}\r\n"],[0,"        "],[-1,"if(error)"],[1,"else"],[0," {"],[1,"\r"],[0,"\n       "]],"start1":10950,"start2":10950,"length1":35,"length2":34},{"diffs":[[0,"    "],[-1,"        console.log(\"MySQL Failure.INSERT\");\n                    console.log(error);\n                }\n                else {\n    "],[1,"if(result.length === 0) {\r\n                console.log(\"result.length=0\");\r\n"],[0,"    "]],"start1":10985,"start2":10985,"length1":138,"length2":84},{"diffs":[[0,"  check = false;"],[1,"\r"],[0,"\n               "]],"start1":11079,"start2":11079,"length1":32,"length2":33},{"diffs":[[0,"k: check });"],[1,"\r"],[0,"\n"],[-1,"    "],[0,"            "]],"start1":11173,"start2":11173,"length1":29,"length2":26},{"diffs":[[0,"   }"],[1,"\r"],[0,"\n"],[-1,"  "],[0,"    "],[-1,"      });\n        }\n"],[0,"    "]],"start1":11196,"start2":11196,"length1":35,"length2":14},{"diffs":[[0,"          else {"],[-1,"\n"],[1,"\r\n    "],[0,"            chec"]],"start1":11204,"start2":11204,"length1":33,"length2":38},{"diffs":[[0,"   check = true;"],[-1,"\n"],[1,"\r\n    "],[0,"            res."]],"start1":11235,"start2":11235,"length1":33,"length2":38},{"diffs":[[0,"heck });"],[-1,"\n"],[1,"\r\n  "],[0,"        "],[-1,"}"],[1,"  }\r\n        }\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[1,"\r"],[0,"\nexports"]],"start1":11333,"start2":11333,"length1":37,"length2":56},{"diffs":[[0,"ction(req, res){"],[1,"\r"],[0,"\n    res.set('Co"]],"start1":11414,"start2":11414,"length1":32,"length2":33},{"diffs":[[0,"lication/json');"],[1,"\r"],[0,"\n    var number "]],"start1":11464,"start2":11464,"length1":32,"length2":33},{"diffs":[[0,"req.body.number;"],[1,"\r"],[0,"\n    var id = re"]],"start1":11499,"start2":11499,"length1":32,"length2":33},{"diffs":[[0,"d = req.body.id;"],[1,"\r"],[0,"\n    client.quer"]],"start1":11526,"start2":11526,"length1":32,"length2":33},{"diffs":[[0,"elds) { "],[1,"\r"],[0,"\n       "]],"start1":11651,"start2":11651,"length1":16,"length2":17},{"diffs":[[0,"ar check = true;"],[1,"\r"],[0,"\n        if(erro"]],"start1":11670,"start2":11670,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            con"]],"start1":11691,"start2":11691,"length1":32,"length2":33},{"diffs":[[0,"NSERT\");"],[1,"\r"],[0,"\n       "]],"start1":11749,"start2":11749,"length1":16,"length2":17},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n            che"]],"start1":11774,"start2":11774,"length1":32,"length2":33},{"diffs":[[0,"  check = false;"],[1,"\r"],[0,"\n            res"]],"start1":11802,"start2":11802,"length1":32,"length2":33},{"diffs":[[0,"check: check });"],[1,"\r"],[0,"\n        }\n     "]],"start1":11889,"start2":11889,"length1":32,"length2":33},{"diffs":[[0,"k });\r\n        }"],[1,"\r"],[0,"\n        else {\n"]],"start1":11900,"start2":11900,"length1":32,"length2":33},{"diffs":[[0,"\r\n        else {"],[1,"\r"],[0,"\n            che"]],"start1":11916,"start2":11916,"length1":32,"length2":33},{"diffs":[[0,"   check = true;"],[1,"\r"],[0,"\n            res"]],"start1":11943,"start2":11943,"length1":32,"length2":33},{"diffs":[[0,"check: check });"],[1,"\r"],[0,"\n        }\n    }"]],"start1":12030,"start2":12030,"length1":32,"length2":33},{"diffs":[[0,"       }"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[1,"\r"],[0,"\nexports"]],"start1":12049,"start2":12049,"length1":27,"length2":30},{"diffs":[[0,"ction(req, res){"],[1,"\r"],[0,"\n    res.set('Co"]],"start1":12106,"start2":12106,"length1":32,"length2":33},{"diffs":[[0,"lication/json');"],[1,"\r"],[0,"\n    var number "]],"start1":12156,"start2":12156,"length1":32,"length2":33},{"diffs":[[0,".number;"],[1,"\r"],[0,"\n    var"]],"start1":12199,"start2":12199,"length1":16,"length2":17},{"diffs":[[0,"body.id;"],[1,"\r"],[0,"\n    cli"]],"start1":12226,"start2":12226,"length1":16,"length2":17},{"diffs":[[0,"esult, fields) {"],[1,"\r"],[0,"\n        var upd"]],"start1":12340,"start2":12340,"length1":32,"length2":33},{"diffs":[[0,"r update = true;"],[1,"\r"],[0,"\n        if(erro"]],"start1":12368,"start2":12368,"length1":32,"length2":33},{"diffs":[[0,"     if(error) {"],[1,"\r"],[0,"\n            upd"]],"start1":12389,"start2":12389,"length1":32,"length2":33},{"diffs":[[0," update = false;"],[1,"\r"],[0,"\n            con"]],"start1":12418,"start2":12418,"length1":32,"length2":33},{"diffs":[[0,"PDATE\");"],[1,"\r"],[0,"\n       "]],"start1":12476,"start2":12476,"length1":16,"length2":17},{"diffs":[[0,"sole.log(error);"],[1,"\r"],[0,"\n            res"]],"start1":12501,"start2":12501,"length1":32,"length2":33},{"diffs":[[0,"heck: update });"],[1,"\r"],[0,"\n        }\n     "]],"start1":12588,"start2":12588,"length1":32,"length2":33},{"diffs":[[0,"e });\r\n        }"],[1,"\r"],[0,"\n        else {\n"]],"start1":12599,"start2":12599,"length1":32,"length2":33},{"diffs":[[0,"\r\n        else {"],[1,"\r"],[0,"\n            upd"]],"start1":12615,"start2":12615,"length1":32,"length2":33},{"diffs":[[0," = true;"],[1,"\r"],[0,"\n       "]],"start1":12651,"start2":12651,"length1":16,"length2":17},{"diffs":[[0,": update });"],[1,"\r"],[0,"\n        }\n "]],"start1":12734,"start2":12734,"length1":24,"length2":25},{"diffs":[[0,"e });\r\n        }"],[1,"\r"],[0,"\n        });\n};\n"]],"start1":12741,"start2":12741,"length1":32,"length2":33},{"diffs":[[0,"     });"],[1,"\r"],[0,"\n};"],[-1,"\n"],[1,"\r\n\r"],[0,"\nexports"]],"start1":12762,"start2":12762,"length1":20,"length2":23},{"diffs":[[0,"q, res){"],[1,"\r"],[0,"\n    res"]],"start1":12813,"start2":12813,"length1":16,"length2":17},{"diffs":[[0,"/json');"],[1,"\r"],[0,"\n    var"]],"start1":12863,"start2":12863,"length1":16,"length2":17},{"diffs":[[0,"keyword;"],[1,"\r"],[0,"\n    cli"]],"start1":12900,"start2":12900,"length1":16,"length2":17},{"diffs":[[0,"ields) {"],[1,"\r"],[0,"\n       "]],"start1":13010,"start2":13010,"length1":16,"length2":17},{"diffs":[[0,"error) {"],[1,"\r"],[0,"\n       "]],"start1":13031,"start2":13031,"length1":16,"length2":17},{"diffs":[[0,"lure.\");"],[1,"\r"],[0,"\n       "]],"start1":13075,"start2":13075,"length1":16,"length2":17},{"diffs":[[0,"(error);"],[1,"\r"],[0,"\n       "]],"start1":13108,"start2":13108,"length1":16,"length2":17},{"diffs":[[0,"      } "],[1,"\r"],[0,"\n       "]],"start1":13120,"start2":13120,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"\r"],[0,"\n       "]],"start1":13130,"start2":13130,"length1":16,"length2":17},{"diffs":[[0,"r check;"],[1,"\r"],[0,"\n       "]],"start1":13150,"start2":13150,"length1":16,"length2":17},{"diffs":[[0,"=== 0) {"],[1,"\r"],[0,"\n       "]],"start1":13185,"start2":13185,"length1":16,"length2":17},{"diffs":[[0,"gth=0\");"],[1,"\r"],[0,"\n       "]],"start1":13230,"start2":13230,"length1":16,"length2":17},{"diffs":[[0,"= false;"],[1,"\r"],[0,"\n       "]],"start1":13258,"start2":13258,"length1":16,"length2":17},{"diffs":[[0,"k: check });"],[1,"\r"],[0,"\n        }\n "]],"start1":13336,"start2":13336,"length1":24,"length2":25},{"diffs":[[0,";\r\n        }"],[1,"\r"],[0,"\n        els"]],"start1":13347,"start2":13347,"length1":24,"length2":25},{"diffs":[[0,"  else {"],[1,"\r"],[0,"\n       "]],"start1":13367,"start2":13367,"length1":16,"length2":17},{"diffs":[[0,"esult}; "],[1,"\r"],[0,"\n       "]],"start1":13418,"start2":13418,"length1":16,"length2":17},{"diffs":[[0,"objMap);"],[1,"\r"],[0,"\n       "]],"start1":13468,"start2":13468,"length1":16,"length2":17},{"diffs":[[0,"ult) });"],[1,"\r"],[0,"\n       "]],"start1":13567,"start2":13567,"length1":16,"length2":17},{"diffs":[[0,"   }"],[1,"\r"],[0,"\n    });"],[1,"\r"],[0,"\n};"],[1,"\r"],[0,"\n"]],"start1":13582,"start2":13582,"length1":16,"length2":19}]],"length":13601,"saved":false}
{"ts":1377370027280,"patch":[[{"diffs":[[0,"    "],[-1,"res.render('DB/appCheckRecommend', { title: '방송화면::::', check: check }"],[1,"client.query(\"INSERT INTO recommend (room, id) VALUES (?, ?)\", [number, id], function(error, result, fields) { \r\n                    if(error) {\r\n                        console.log(\"MySQL Failure.INSERT\""],[0,");\r\n"]],"start1":11109,"start2":11109,"length1":78,"length2":212},{"diffs":[[0,");\r\n            "],[-1,"}\r\n"],[0,"            else"]],"start1":11317,"start2":11317,"length1":35,"length2":32},{"diffs":[[0,"            "],[-1,"else {\r\n"],[1,"console.log(error);\r\n        "],[0,"            "]],"start1":11333,"start2":11333,"length1":32,"length2":53},{"diffs":[[0," check = true;\r\n"],[1,"        "],[0,"                "]],"start1":11389,"start2":11389,"length1":32,"length2":40},{"diffs":[[0,"s.render('DB/app"],[-1,"Check"],[1,"Insert"],[0,"Recommend', { ti"]],"start1":11431,"start2":11431,"length1":37,"length2":38},{"diffs":[[0,");\r\n            "],[-1,"}\r\n"],[0,"        }\r\n    }"]],"start1":11500,"start2":11500,"length1":35,"length2":32},{"diffs":[[0,"    "],[-1,"});\r\n};\r\nexports.appInsertRecommend = function(req, res){\r\n    res.set('Content-Type', 'application/json');\r\n    var number = req.body.number;\r\n    var id = req.body.id;\r\n    client.query(\"INSERT INTO recommend (room, id) VALUES (?, ?)\", [number, id], function(error, result, fields) { \r\n"],[1,"                else {\r\n                "],[0,"        "],[-1,"var "],[0,"check = "],[-1,"true;\r\n        if(error) {\r\n            console.log(\"MySQL Failure.INSERT\");\r\n            console.log(error);\r\n            check = false;\r\n"],[1,"false;\r\n            "],[0,"    "]],"start1":11527,"start2":11527,"length1":455,"length2":84},{"diffs":[[0,"s.render('DB/app"],[-1,"Insert"],[1,"Check"],[0,"Recommend', { ti"]],"start1":11621,"start2":11621,"length1":38,"length2":37},{"diffs":[[0,"ck });\r\n        "],[-1,"}\r\n"],[1,"            }\r\n                });\r\n            }\r\n    "],[0,"        else {\r\n"]],"start1":11685,"start2":11685,"length1":35,"length2":87},{"diffs":[[0," {\r\n            "],[1," "],[1,"   "],[0,"check = true;\r\n "]],"start1":11768,"start2":11768,"length1":32,"length2":36},{"diffs":[[0," check = true;\r\n"],[1,"    "],[0,"            res."]],"start1":11787,"start2":11787,"length1":32,"length2":36},{"diffs":[[0,"s.render('DB/app"],[-1,"Insert"],[1,"Check"],[0,"Recommend', { ti"]],"start1":11821,"start2":11821,"length1":38,"length2":37},{"diffs":[[0,");\r\n        "],[-1,"}\r\n    })"],[1,"    }\r\n        }\r\n    });\r\n};\r\nexports.appInsertRecommend = function(req, res){\r\n    res.set('Content-Type', 'application/json');\r\n    var number = req.body.number;\r\n    var id = req.body.id"],[0,";\r\n};\r\nexpor"]],"start1":11889,"start2":11889,"length1":33,"length2":214}]],"length":13627,"saved":false}
{"ts":1377370033690,"patch":[[{"diffs":[[0,"('DB/app"],[-1,"Insert"],[1,"Check"],[0,"Recommen"]],"start1":11439,"start2":11439,"length1":22,"length2":21}]],"length":13626,"saved":false}
{"ts":1377370175555,"patch":[[{"diffs":[[0,"ion(req, res){\r\n"],[1,"    exports.eventEmit.emit('makeroom')\r\n"],[0,"    var id = req"]],"start1":1119,"start2":1119,"length1":32,"length2":72}]],"length":13666,"saved":false}
{"ts":1377370178382,"patch":[[{"diffs":[[0,"make"],[-1,"r"],[1,"R"],[0,"oom')"],[1,";"],[0,"\r\n  "]],"start1":1163,"start2":1163,"length1":14,"length2":15}]],"length":13667,"saved":false}
{"ts":1377370189133,"patch":[[{"diffs":[[0,"result.length =="],[1,"="],[0," 0) {\r\n         "]],"start1":1482,"start2":1482,"length1":32,"length2":33},{"diffs":[[0,"result.length =="],[1,"="],[0," 0) {\r\n         "]],"start1":4171,"start2":4171,"length1":32,"length2":33},{"diffs":[[0,"pdate =="],[1,"="],[0," false) "]],"start1":5304,"start2":5304,"length1":16,"length2":17}]],"length":13670,"saved":false}
{"ts":1377370280597,"patch":[[{"diffs":[[0,"ter();\r\n"],[1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"/*\r\n * G"]],"start1":267,"start2":267,"length1":16,"length2":57},{"diffs":[[0,"){\r\n"],[-1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    "]],"start1":1172,"start2":1172,"length1":49,"length2":8}]],"length":13670,"saved":false}
{"ts":1377370301745,"patch":[[{"diffs":[[0,");\r\n"],[-1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"/*\r\n"]],"start1":271,"start2":271,"length1":49,"length2":8},{"diffs":[[0,"ion(req, res){\r\n"],[1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    client.query"]],"start1":324,"start2":324,"length1":32,"length2":73}]],"length":13670,"saved":false}
{"ts":1377370444756,"patch":[[{"diffs":[[0,"tter();\r"],[1,"\n\r\nsetInterval(function(){\r\n    exports.eventEmit.emit('makeRoom');\r\n}, 1000);\r"],[0,"\n/*\r\n * "]],"start1":266,"start2":266,"length1":16,"length2":95},{"diffs":[[0,"){\r\n"],[-1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    "]],"start1":415,"start2":415,"length1":49,"length2":8}]],"length":13708,"saved":false}
{"ts":1377370550382,"patch":[[{"diffs":[[0,"exports."],[-1,"eventEmit"],[1,"timer"],[0," = new p"]],"start1":226,"start2":226,"length1":25,"length2":21}]],"length":13704,"saved":false}
{"ts":1377370554871,"patch":[[{"diffs":[[0,"rts."],[-1,"timer"],[1,"eventEmit"],[0," = n"]],"start1":230,"start2":230,"length1":13,"length2":17}]],"length":13708,"saved":false}
{"ts":1377370570198,"patch":[[{"diffs":[[0,"();\r"],[-1,"\n\r\nsetInterval(function(){\r\n    exports.eventEmit.emit('makeRoom');\r\n}, 1000);\r"],[0,"\n/*\r"]],"start1":270,"start2":270,"length1":87,"length2":8},{"diffs":[[0,"ction(req, res){"],[1,"exports.eventEmit = new process.EventEmitter();"],[0,"\r\n    client.que"]],"start1":322,"start2":322,"length1":32,"length2":79}]],"length":13676,"saved":false}
{"ts":1377370571843,"patch":[[{"diffs":[[0,"q, res){"],[1,"\r\n    "],[0,"exports."]],"start1":330,"start2":330,"length1":16,"length2":22}]],"length":13682,"saved":false}
{"ts":1377370677051,"patch":[[{"diffs":[[0,"Emit"],[-1," = new process.EventEmitter("],[1,".emit('makeRoom'"],[0,");\r\n"]],"start1":357,"start2":357,"length1":36,"length2":24}]],"length":13670,"saved":false}
{"ts":1377370687746,"patch":[[{"diffs":[[0,"){\r\n"],[-1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    "]],"start1":336,"start2":336,"length1":49,"length2":8}]],"length":13629,"saved":false}
{"ts":1377370694151,"patch":[[{"diffs":[[0,"ter();\r\n"],[1,"    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n"],[0,"/*\r\n * G"]],"start1":267,"start2":267,"length1":16,"length2":180}]],"length":13793,"saved":false}
{"ts":1377370728958,"patch":[[{"diffs":[[0,"();\r\n    exports"],[-1,"."],[0,"eventEmit.emit('"]],"start1":270,"start2":270,"length1":33,"length2":32}]],"length":13792,"saved":false}
{"ts":1377370731079,"patch":[[{"diffs":[[0," exports"],[1,"."],[0,"eventEmi"]],"start1":278,"start2":278,"length1":16,"length2":17}]],"length":13793,"saved":false}
{"ts":1377370948768,"patch":[[{"diffs":[[0,");\r\n"],[-1,"    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n"],[0,"/*\r\n"]],"start1":271,"start2":271,"length1":172,"length2":8},{"diffs":[[0,"ion(req, res){\r\n"],[1,"    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    var id = req"]],"start1":1119,"start2":1119,"length1":32,"length2":196}]],"length":13793,"saved":false}
{"ts":1377370973900,"patch":[[{"diffs":[[0,"){\r\n"],[-1,"    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    "]],"start1":1131,"start2":1131,"length1":172,"length2":8}]],"length":13629,"saved":false}
{"ts":1377371018374,"patch":[[{"diffs":[[0,"ter();\r\n"],[1,"    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n    exports.eventEmit.emit('makeRoom');\r\n"],[0,"/*\r\n * G"]],"start1":267,"start2":267,"length1":16,"length2":180}]],"length":13793,"saved":false}
{"ts":1377371188787,"patch":[[{"diffs":[[0,"t = "],[-1,"new process."],[1,"require('events').EventEmitter"],[0,"Even"]],"start1":242,"start2":242,"length1":20,"length2":38}]],"length":13811,"saved":false}
{"ts":1377371224214,"patch":[[{"diffs":[[0,"\n});\r\n\r\n"],[-1,"exports.e"],[1,"var E"],[0,"ventEmit"],[1,"ter"],[0," = requi"]],"start1":218,"start2":218,"length1":33,"length2":32},{"diffs":[[0,"Emitter();\r\n"],[1,"exports.eventEmit = new EventEmitter();\r\n"],[0,"    exports."]],"start1":280,"start2":280,"length1":24,"length2":65}]],"length":13851,"saved":false}
{"ts":1377371229056,"patch":[[{"diffs":[[0,"Emitter();\r\n"],[1,"/*\r\n * GET home page.\r\n */\r\nexports.index = function(req, res){\r\n"],[0,"    exports."]],"start1":321,"start2":321,"length1":24,"length2":89},{"diffs":[[0,");\r\n"],[-1,"/*\r\n * GET home page.\r\n */\r\nexports.index = function(req, res){\r\n"],[0,"    "]],"start1":558,"start2":558,"length1":73,"length2":8}]],"length":13851,"saved":false}
{"ts":1377371238420,"patch":[[{"diffs":[[0,"tEmitter"],[-1,"EventEmitter"],[0,"();\r\nexp"]],"start1":267,"start2":267,"length1":28,"length2":16}]],"length":13839,"saved":false}
{"ts":1377371247688,"patch":[[{"diffs":[[0,"tEmitter"],[-1,"()"],[0,";\r\nexpor"]],"start1":267,"start2":267,"length1":18,"length2":16}]],"length":13837,"saved":false}
{"ts":1377371363224,"patch":[[{"diffs":[[0,"r = "],[-1,"require('events')"],[1,"new process"],[0,".Eve"]],"start1":241,"start2":241,"length1":25,"length2":19}]],"length":13831,"saved":false}
{"ts":1377371374912,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"var EventEmitter = new process.EventEmitter;\r\n"],[0,"expo"]],"start1":222,"start2":222,"length1":54,"length2":8},{"diffs":[[0,"t = "],[-1,"new "],[1,"process."],[0,"Even"]],"start1":242,"start2":242,"length1":12,"length2":16},{"diffs":[[0,"tter"],[-1,"()"],[0,";\r\n/"]],"start1":262,"start2":262,"length1":10,"length2":8}]],"length":13787,"saved":false}
{"ts":1377371472510,"patch":[[{"diffs":[[0,"ntEmit ="],[1," new"],[0," process"]],"start1":237,"start2":237,"length1":16,"length2":20}]],"length":13791,"saved":false}
{"ts":1377371636231,"patch":[[{"diffs":[[0,"tEmitter"],[1,"()"],[0,";\r\n/*\r\n "]],"start1":262,"start2":262,"length1":16,"length2":18}]],"length":13793,"saved":false}
{"ts":1377371736560,"patch":[[{"diffs":[[0,"\n});\r\n\r\n"],[-1,"exports."],[1,"var "],[0,"eventEmi"]],"start1":218,"start2":218,"length1":24,"length2":20},{"diffs":[[0,"ter();\r\n"],[1,"eventEmit.on('makeRoom', function(){\r\n    console.log('test');\r\n    \r\n});\r\n"],[0,"/*\r\n * G"]],"start1":263,"start2":263,"length1":16,"length2":91}]],"length":13864,"saved":false}
{"ts":1377371767138,"patch":[[{"diffs":[[0," res){\r\n    "],[-1,"exports."],[0,"eventEmit.em"]],"start1":403,"start2":403,"length1":32,"length2":24},{"diffs":[[0,"oom');\r\n    "],[-1,"exports."],[0,"eventEmit.em"]],"start1":436,"start2":436,"length1":32,"length2":24},{"diffs":[[0,"oom');\r\n    "],[-1,"exports."],[0,"eventEmit.em"]],"start1":469,"start2":469,"length1":32,"length2":24},{"diffs":[[0,");\r\n    "],[-1,"exports."],[0,"eventEmi"]],"start1":506,"start2":506,"length1":24,"length2":16}]],"length":13832,"saved":false}
{"ts":1377371823705,"patch":[[{"diffs":[[0,"\n});\r\n\r\n"],[-1,"var "],[1,"exports."],[0,"eventEmi"]],"start1":218,"start2":218,"length1":20,"length2":24},{"diffs":[[0,"ter();\r\n"],[1,"exports."],[0,"eventEmi"]],"start1":267,"start2":267,"length1":16,"length2":24},{"diffs":[[0,"   e"],[-1,"ventEmit.emit('makeRoom');\r\n    eventEmit.emit('makeRoom');\r\n    eventEmit.emit('makeRoom');\r\n    "],[1,"xports."],[0,"even"]],"start1":424,"start2":424,"length1":106,"length2":15}]],"length":13753,"saved":false}
{"ts":1377371929927,"patch":[[{"diffs":[[0,");\r\n"],[-1,"exports.eventEmit.on('makeRoom', function(){\r\n    console.log('test');\r\n    \r\n});\r\n"],[0,"/*\r\n"]],"start1":271,"start2":271,"length1":91,"length2":8}]],"length":13670,"saved":false}
{"ts":1377375400545,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"exports.eventEmit = new process.EventEmitter();\r\n"],[0,"/*\r\n"]],"start1":222,"start2":222,"length1":57,"length2":8}]],"length":13621,"saved":false}
{"ts":1377375403057,"patch":[[{"diffs":[[0,"){\r\n"],[-1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    "]],"start1":287,"start2":287,"length1":49,"length2":8}]],"length":13580,"saved":false}
{"contributors":[],"silentsave":false,"ts":1377376086156,"patch":[[{"diffs":[[0,"\n});\r\n\r\n"],[1,"exports.eventEmit = new process.EventEmitter();\r\n"],[0,"/*\r\n * G"]],"start1":218,"start2":218,"length1":16,"length2":65},{"diffs":[[0,"ion(req, res){\r\n"],[1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    client.query"]],"start1":324,"start2":324,"length1":32,"length2":73}]],"length":13670,"saved":false}
{"ts":1377376192820,"patch":[[{"diffs":[[0,"){\r\n"],[-1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    "]],"start1":336,"start2":336,"length1":49,"length2":8},{"diffs":[[0,"ion(req, res){\r\n"],[1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    var id = req"]],"start1":1119,"start2":1119,"length1":32,"length2":73}]],"length":13670,"saved":false}
{"contributors":[],"silentsave":false,"ts":1377376348812,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"exports.eventEmit = new process.EventEmitter();\r\n"],[0,"/*\r\n"]],"start1":222,"start2":222,"length1":57,"length2":8},{"diffs":[[0,"){\r\n"],[-1,"    exports.eventEmit.emit('makeRoom');\r\n"],[0,"    "]],"start1":1082,"start2":1082,"length1":49,"length2":8}]],"length":13580,"saved":false}
{"contributors":[],"silentsave":false,"ts":1377376997244,"patch":[[{"diffs":[[0,"};\r\n"],[-1,"exports.appInsertRecommend = function(req, res){\r\n    res.set('Content-Type', 'application/json');\r\n    var number = req.body.number;\r\n    var id = req.body.id;\r\n};\r\n"],[0,"expo"]],"start1":11881,"start2":11881,"length1":174,"length2":8}]],"length":13414,"saved":false}
{"ts":1377377034388,"patch":[[{"diffs":[[0,"= req.body.id;\r\n"],[1,"    console.log(id);\r\n    console.log(number);\r\n"],[0,"    client.query"]],"start1":10528,"start2":10528,"length1":32,"length2":80}]],"length":13462,"saved":false}
{"ts":1377377173931,"patch":[[{"diffs":[[0,"d;\r\n"],[-1,"    console.log(id);\r\n    console.log(number);\r\n"],[0,"    "]],"start1":10540,"start2":10540,"length1":56,"length2":8},{"diffs":[[0,"}\r\n    });\r\n};\r\n"],[1,"exports.appInsertRecommend = function(req, res){\r\n    res.set('Content-Type', 'application/json');\r\n    var number = req.body.number;\r\n    var id = req.body.id;\r\n};\r\n"],[0,"exports.appIncre"]],"start1":11869,"start2":11869,"length1":32,"length2":198}]],"length":13580,"saved":false}
{"ts":1377377194410,"patch":[[{"diffs":[[0,"};\r\n"],[-1,"exports.appInsertRecommend = function(req, res){\r\n    res.set('Content-Type', 'application/json');\r\n    var number = req.body.number;\r\n    var id = req.body.id;\r\n};\r\n"],[0,"expo"]],"start1":11881,"start2":11881,"length1":174,"length2":8}]],"length":13414,"saved":false}
{"ts":1377377239784,"patch":[[{"diffs":[[0,"= req.body.id;\r\n"],[1,"    console.log(number);\r\n    console.log(id);\r\n"],[0,"    client.query"]],"start1":10528,"start2":10528,"length1":32,"length2":80}]],"length":13462,"saved":false}
{"contributors":[],"silentsave":false,"ts":1377542657923,"patch":[[{"diffs":[[0,"re('fs')"],[-1,""],[0,""],[1,"\r\n, util = require('util')"],[0,";\r\n\r\nvar"]],"start1":42,"start2":42,"length1":16,"length2":42},{"diffs":[[0,"ion(req, res){\r\n"],[1,"    var room;\r\n    var favorites;\r\n    if(typeof req.session.user !== 'undefined') {\r\n        client.query('SELECT * FROM favorites INNER JOIN room ON favorites.BjId=room.id WHERE favorites.MyId=?', [req.session.id], function(error, result, fields){\r\n            if(error) {\r\n                console.log(\"MySQL Failure.\");\r\n                console.log(error);\r\n            }\r\n            favorites = result;\r\n        "],[0,"    client.query"]],"start1":301,"start2":301,"length1":32,"length2":449},{"diffs":[[0,"on(error, result"],[1,"2"],[0,", fields) {\r\n   "]],"start1":815,"start2":815,"length1":32,"length2":33},{"diffs":[[0,"lds) {\r\n        "],[1,"     "],[1,"   "],[0,"if(error) {\r\n   "]],"start1":837,"start2":837,"length1":32,"length2":40},{"diffs":[[0," {\r\n            "],[1,"   "],[1,"     "],[0,"console.log(\"MyS"]],"start1":870,"start2":870,"length1":32,"length2":40},{"diffs":[[0,");\r\n            "],[1,"        "],[0,"console.log(erro"]],"start1":922,"start2":922,"length1":32,"length2":40},{"diffs":[[0,");\r\n        "],[1," "],[-1,"} \r\n        var"],[1,"       } \r\n                room = result2;\r\n                res.render('page/index', { title: '메인화면::::', whoami: req.session.user, room: room, favorites: favorites });\r\n            });\r\n        });\r\n    }\r\n    else {\r\n        client.query('SELECT * FROM room ORDER BY recommend DESC, number ASC', function(error, result, fields) {\r\n            if(error) {\r\n                console.log(\"MySQL Failure.\");\r\n                console.log(error);\r\n            } \r\n           "],[0," room = resu"]],"start1":963,"start2":963,"length1":39,"length2":495},{"diffs":[[0,"room = result;\r\n"],[1,"    "],[0,"        res.rend"]],"start1":1447,"start2":1447,"length1":32,"length2":36},{"diffs":[[0,"om });\r\n    "],[-1,"});"],[1,"    });\r\n    }"],[0,"\r\n};\r\n"],[1,"\r\n"],[0,"exports.inde"]],"start1":1555,"start2":1555,"length1":33,"length2":46},{"diffs":[[0,"req, res){\r\n"],[1,"    var room;\r\n    var favorites;\r\n    client.query('SELECT * FROM favorites INNER JOIN room ON favorites.BjId=room.id WHERE favorites.MyId=?', [req.session.userId], function(error, result, fields){\r\n        if(error) {\r\n            console.log(\"MySQL Failure.\");\r\n            console.log(error);\r\n        }\r\n        favorites = result;\r\n    "],[0,"    client.q"]],"start1":1615,"start2":1615,"length1":24,"length2":366},{"diffs":[[0,"on(error, result"],[1,"2"],[0,", fields) {\r\n   "]],"start1":2050,"start2":2050,"length1":32,"length2":33},{"diffs":[[0,"lds) {\r\n        "],[1,"   "],[1," "],[0,"if(error) {\r\n   "]],"start1":2072,"start2":2072,"length1":32,"length2":36},{"diffs":[[0,"   if(error) {\r\n"],[1,"    "],[0,"            cons"]],"start1":2089,"start2":2089,"length1":32,"length2":36},{"diffs":[[0,");\r\n            "],[1," "],[1,"   "],[0,"console.log(erro"]],"start1":2149,"start2":2149,"length1":32,"length2":36},{"diffs":[[0,"rror);\r\n        "],[1,"    "],[0,"} \r\n        var "]],"start1":2182,"start2":2182,"length1":32,"length2":36},{"diffs":[[0,"    } \r\n        "],[-1,"var"],[1,"   "],[0," room = result;\r"]],"start1":2198,"start2":2198,"length1":35,"length2":35},{"diffs":[[0,"   room = result"],[1,"2"],[0,";\r\n"],[1,"    "],[0,"        res.rend"]],"start1":2215,"start2":2215,"length1":35,"length2":40},{"diffs":[[0,"age/"],[-1,"new_"],[0,"inde"]],"start1":2260,"start2":2260,"length1":12,"length2":8},{"diffs":[[0,"user, room: room"],[1,", favorites: favorites });\r\n       "],[0," });\r\n    });\r\n}"]],"start1":2313,"start2":2313,"length1":32,"length2":67},{"diffs":[[0,"  \r\n            "],[1,"\r\n            var room;\r\n            var favorites;\r\n            client.query('SELECT * FROM favorites INNER JOIN room ON favorites.BjId=room.id WHERE favorites.MyId=?', [req.session.userId], function(error, result, fields){\r\n                if(error) {\r\n                    console.log(\"MySQL Failure.\");\r\n                    console.log(error);\r\n                }\r\n                favorites = result;\r\n                "],[0,"client.query('SE"]],"start1":3018,"start2":3018,"length1":32,"length2":452},{"diffs":[[0,"                "],[1,"    "],[0,"if(error) {\r\n   "]],"start1":3561,"start2":3561,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"  "],[1,"  "],[0,"console.log(\"MyS"]],"start1":3598,"start2":3598,"length1":32,"length2":36},{"diffs":[[0,"                "],[1,"    "],[0,"console.log(erro"]],"start1":3654,"start2":3654,"length1":32,"length2":36},{"diffs":[[0,"                "],[1," "],[1,"   "],[0,"} \r\n            "]],"start1":3695,"start2":3695,"length1":32,"length2":36},{"diffs":[[0,"                "],[-1,"var"],[1,"   "],[0," room = result2;"]],"start1":3719,"start2":3719,"length1":35,"length2":35},{"diffs":[[0,"oom = result2;\r\n"],[1,"    "],[0,"                "]],"start1":3740,"start2":3740,"length1":32,"length2":36},{"diffs":[[0,"user, room: room"],[1,", favorites: favorites });\r\n               "],[0," });\r\n          "]],"start1":3842,"start2":3842,"length1":32,"length2":75},{"diffs":[[0,"\r\n\r\n"],[-1,"exports.list = function(req, res){\r\n    res.send('방송 리스트 페이지 입니다.');\r\n};\r\n\r\n"],[0,"expo"]],"start1":4539,"start2":4539,"length1":84,"length2":8},{"diffs":[[0,"render('"],[1,"result/"],[0,"success_"]],"start1":6762,"start2":6762,"length1":16,"length2":23},{"diffs":[[0,"render('"],[1,"result/"],[0,"fail_rec"]],"start1":7016,"start2":7016,"length1":16,"length2":23},{"diffs":[[0,"render('"],[1,"result/"],[0,"aready_r"]],"start1":7255,"start2":7255,"length1":16,"length2":23},{"diffs":[[0,"\r\n};\r\n\r\n"],[1,"exports.favorites = function(req, res){\r\n    if(typeof req.session.user == 'undefined') {\r\n        res.render('page/request_login', { title: '로그인이 필요합니다::::', whoami: req.session.user });\r\n    }\r\n    else {\r\n        \r\n        client.query('SELECT * FROM favorites WHERE BjId=? and MyId=?', [req.query.BJ, req.query.id], function(error, result, fields) {\r\n            if(error) {\r\n                console.log(\"MySQL Failure.SELECT\");\r\n                console.log(error);\r\n            } \r\n            if(result.length === 0) {\r\n                client.query(\"INSERT INTO favorites (BjId, MyId) VALUES (?, ?)\", [req.query.BJ, req.query.id], function(error, result2, fields) { \r\n                    if(error) {\r\n                        console.log(\"MySQL Failure.INSERT\");\r\n                        console.log(error);\r\n                    }\r\n                    res.render('result/success_favorites', { title: '방송화면::::', whoami: req.session.user, userid: req.session.userId });\r\n                });\r\n            }\r\n            else {\r\n                res.render('result/aready_favorites', { title: '방송화면::::', whoami: req.session.user, userid: req.session.userId });  \r\n            }\r\n        });\r\n    }\r\n};\r\n"],[0,"\r\nexport"]],"start1":7403,"start2":7403,"length1":16,"length2":1221},{"diffs":[[0," });\r\n};\r\n\r\n"],[1,"exports.uploadThumbnail = function(req, res){    \r\n    var image = req.body.image;\r\n    console.log(\"post success\");\r\n};\r\n \r\n"],[0,"\r\n\r\n\r\n/* and"]],"start1":8789,"start2":8789,"length1":24,"length2":149},{"diffs":[[0,") });\r\n        }\r\n    });\r\n}"],[-1,""],[0,""],[1,";\r\n\r\nexports.appInsertFavorites = function(req, res){\r\n    res.set('Content-Type', 'application/json');\r\n    var BjId = req.body.BjId;\r\n    var UserId = req.body.UserId;\r\n    client.query('SELECT * FROM favorites WHERE BjId=? and MyId=?', [BjId, UserId], function(error, result, fields) {\r\n        var check = true;\r\n        if(error) {\r\n            console.log(\"MySQL Failure.SELECT\");\r\n            console.log(error);\r\n        } \r\n        if(result.length === 0) {\r\n            client.query(\"INSERT INTO favorites (BjId, MyId) VALUES (?, ?)\", [BjId, UserId], function(error, result2, fields) { \r\n                if(error) {\r\n                    console.log(\"MySQL Failure.INSERT\");\r\n                    console.log(error);\r\n                }\r\n                res.render('DB/appInsertFavorites', { title: '방송화면::::', check: check });\r\n            });\r\n        }\r\n        else {\r\n            check = false;\r\n            res.render('DB/appInsertFavorites', { title: '방송화면::::', check: check });  \r\n        }\r\n    });\r\n};\r\n\r\nexports.appFavoritesList = function(req, res){\r\n    res.set('Content-Type', 'application/json');\r\n    var UserId = req.body.UserId;\r\n    client.query('SELECT * FROM favorites INNER JOIN room ON favorites.BjId=room.id WHERE favorites.MyId=?', [UserId], function(error, result, fields){\r\n        if(error) {\r\n            console.log(\"MySQL Failure.\");\r\n            console.log(error);\r\n        }\r\n        res.render('DB/appInsertFavorites', { title: '방송화면::::', check: JSON.stringify(result) });  \r\n    });\r\n};\r\n\r\n//keeped connection\r\nfunction keepalive() {\r\n  client.query('select 1', [], function(err, result) {\r\n    if(err) return console.log(err);\r\n    // Successul keepalive\r\n  });\r\n}\r\nsetInterval(keepalive, 1000*60*5)"],[0,";\r\n"]],"start1":16525,"start2":16525,"length1":31,"length2":1776}]],"length":18301,"saved":false}
{"ts":1377543484418,"patch":[[{"diffs":[[0,"ody.image;\r\n"],[1,"    fs.readFile(image, function(err, original_data){\r\n        fs.writeFile('image_orig.jpg', original_data, function(err) {});\r\n        var base64Image = original_data.toString('base64');\r\n        var decodedImage = new Buffer(base64Image, 'base64');\r\n        fs.writeFile('image_decoded.jpg', decodedImage, function(err) {});\r\n    });\r\n"],[0,"    console."]],"start1":8873,"start2":8873,"length1":24,"length2":361}]],"length":18638,"saved":false}
{"ts":1377544102942,"patch":[[{"diffs":[[0," fs."],[-1,"readFile(image, function(err, original_data){\r\n        fs.writeFile('image_orig.jpg', original_data, function(err) {});\r\n        var base64Image = original_data.toString('base64');\r\n        var decodedImage ="],[1,"writeFile(\"arghhhh.jpg\","],[0," new"]],"start1":8888,"start2":8888,"length1":216,"length2":32},{"diffs":[[0,"fer("],[-1,"base64I"],[1,"i"],[0,"mage, "],[-1,"'"],[1,"\""],[0,"base64"],[-1,"');\r\n        fs.writeFile('image_decoded.jpg', decodedImage"],[1,"\")"],[0,", fu"]],"start1":8924,"start2":8924,"length1":87,"length2":24},{"diffs":[[0,") {});\r\n"],[-1,"    });\r\n"],[0,"    cons"]],"start1":8958,"start2":8958,"length1":25,"length2":16}]],"length":18382,"saved":false}
{"ts":1377544708253,"patch":[[{"diffs":[[0,"    "],[-1,"fs.writeFile(\"arghhhh"],[1,"var roomNumber = req.body.room;\r\n    fs.writeFile(\"/public/uploads/\" + room + \""],[0,".jpg"]],"start1":8885,"start2":8885,"length1":29,"length2":87},{"diffs":[[0,"success\");\r\n"],[1,"    console.log(\"roomNumber :\" + roomNumber);\r\n"],[0,"};\r\n \r\n\r\n\r\n\r"]],"start1":9046,"start2":9046,"length1":24,"length2":71}]],"length":18487,"saved":false}
{"ts":1377544711343,"patch":[[{"diffs":[[0,"\" + room"],[1,"Number"],[0," + \".jpg"]],"start1":8956,"start2":8956,"length1":16,"length2":22}]],"length":18493,"saved":false}
{"ts":1377544833378,"patch":[[{"diffs":[[0,"ile("],[-1,"\"/public/uploads/\" + "],[0,"room"]],"start1":8935,"start2":8935,"length1":29,"length2":8}]],"length":18472,"saved":false}
{"ts":1377544970732,"patch":[[{"diffs":[[0,"iteFile("],[1,"\"/uploads/\""],[0,"roomNumb"]],"start1":8931,"start2":8931,"length1":16,"length2":27}]],"length":18483,"saved":false}
{"ts":1377544974152,"patch":[[{"diffs":[[0,"ploads/\""],[1," + "],[0,"roomNumb"]],"start1":8942,"start2":8942,"length1":16,"length2":19}]],"length":18486,"saved":false}
{"ts":1377545324665,"patch":[[{"diffs":[[0,"ile("],[-1,"\"/uploads/\" + "],[0,"room"]],"start1":8935,"start2":8935,"length1":22,"length2":8}]],"length":18472,"saved":false}
{"ts":1377547393951,"patch":[[{"diffs":[[0,"    res.render('"],[1,"DB/"],[0,"appIncreaseRecom"]],"start1":15653,"start2":15653,"length1":32,"length2":35},{"diffs":[[0,"render('"],[1,"DB/"],[0,"appIncre"]],"start1":15806,"start2":15806,"length1":16,"length2":19}]],"length":18478,"saved":false}
{"ts":1377548758395,"patch":[[{"diffs":[[0,"iteFile("],[1,"__dirname + \"/public/uploads/\" + "],[0,"roomNumb"]],"start1":8931,"start2":8931,"length1":16,"length2":49}]],"length":18511,"saved":false}
{"ts":1377549236161,"patch":[[{"diffs":[[0,"ile("],[-1,"__dirname + \"/public"],[1,"\""],[0,"/uploads"],[-1,"/"],[0,"\" "],[-1,"+"],[1,","],[0," roo"]],"start1":8935,"start2":8935,"length1":40,"length2":20}]],"length":18491,"saved":false}
{"ts":1377549238136,"patch":[[{"diffs":[[0,"/uploads"],[1,"/"],[0,"\" , room"]],"start1":8940,"start2":8940,"length1":16,"length2":17}]],"length":18492,"saved":false}
{"ts":1377549434460,"patch":[[{"diffs":[[0,"ile("],[-1,"\"/uploads/\" , "],[0,"room"]],"start1":8935,"start2":8935,"length1":22,"length2":8}]],"length":18478,"saved":false}
{"ts":1377549461408,"patch":[[{"diffs":[[0,"body.room;\r\n"],[1,"    var path = \"\";\r\n"],[0,"    fs.write"]],"start1":8910,"start2":8910,"length1":24,"length2":44}]],"length":18498,"saved":false}
{"ts":1377549476064,"patch":[[{"diffs":[[0,"h = "],[-1,"\"\""],[1,"__dirname"],[0,";\r\n "]],"start1":8933,"start2":8933,"length1":10,"length2":17}]],"length":18505,"saved":false}
{"ts":1377549672012,"patch":[[{"diffs":[[0,"    "],[-1,"var path = __dirname;"],[1,"\r\n    var mkdirp = require(\"mkdirp\");\r\n    var fs = require(\"fs\");\r\n    var getDirName = require(\"path\").dirname;\r\n    function writeFile (path, contents, cb) {\r\n        mkdirp(getDirName(path), function (err) {\r\n            if (err) return cb(err)\r\n            fs.writeFile(path, contents, cb)\r\n        });\r\n    }\r\n    \r\n    "],[0,"\r\n  "]],"start1":8922,"start2":8922,"length1":29,"length2":334}]],"length":18810,"saved":false}
{"ts":1377549791546,"patch":[[{"diffs":[[0," cb(err)"],[1,";"],[0,"\r\n      "]],"start1":9166,"start2":9166,"length1":16,"length2":17},{"diffs":[[0,"nts, cb)"],[1,";"],[0,"\r\n      "]],"start1":9213,"start2":9213,"length1":16,"length2":17},{"diffs":[[0,"  \r\n    "],[-1,"\r\n    "],[1,"writeFile(roomNumber + \".jpg\", new Buffer(image, \"base64\"), function(err) {});\r\n    \r\n    //"],[0,"fs.write"]],"start1":9246,"start2":9246,"length1":22,"length2":108}]],"length":18898,"saved":false}
{"ts":1377549818863,"patch":[[{"diffs":[[0,"\r\n    writeFile("],[1,"\"/public/uploads/\" + "],[0,"roomNumber + \".j"]],"start1":9248,"start2":9248,"length1":32,"length2":53}]],"length":18919,"saved":false}
{"ts":1377549879046,"patch":[[{"diffs":[[0,"    "],[-1,"\r\n"],[0,"    "],[-1,"var mkdirp = require(\"mkdirp\");\r\n    var fs = require(\"fs\");\r\n    var getDirName = require(\"path\").dirname;\r\n    function writeFile (path, contents, cb) {\r\n        mkdirp(getDirName(path), function (err) {\r\n            if (err) return cb(err);\r\n            fs.writeFile(path, contents, cb);\r\n        });\r\n    }\r\n    \r\n    writeFile(\"/public/uploads/\" + roomNumber + \".jpg\", new Buffer(image, \"base64\"), function(err) {});\r\n    \r\n    //"],[1,"    \r\n    "],[0,"fs.w"]],"start1":8922,"start2":8922,"length1":449,"length2":22}]],"length":18492,"saved":false}
{"ts":1377550572014,"patch":[[{"diffs":[[0,"  \r\n    "],[1,"//"],[0,"fs.write"]],"start1":8932,"start2":8932,"length1":16,"length2":18}]],"length":18494,"saved":false}
{"ts":1377550971747,"patch":[[{"diffs":[[0,"  \r\n    "],[-1,"//"],[0,"fs.write"]],"start1":8932,"start2":8932,"length1":18,"length2":16}]],"length":18492,"saved":false}
{"ts":1377552698330,"patch":[[{"diffs":[[0,"omNumber);\r\n"],[1,"    res.end();\r\n"],[0,"};\r\n \r\n\r\n\r\n\r"]],"start1":9092,"start2":9092,"length1":24,"length2":40}]],"length":18508,"saved":false}
{"ts":1377552912644,"patch":[[{"diffs":[[0,"res.end();\r\n"],[1,"    //res.Flush();\r\n"],[0,"};\r\n \r\n\r\n\r\n\r"]],"start1":9108,"start2":9108,"length1":24,"length2":44}]],"length":18528,"saved":false}
{"ts":1377553077515,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"exports.index2 = function(req, res){\r\n    var room;\r\n    var favorites;\r\n    client.query('SELECT * FROM favorites INNER JOIN room ON favorites.BjId=room.id WHERE favorites.MyId=?', [req.session.userId], function(error, result, fields){\r\n        if(error) {\r\n            console.log(\"MySQL Failure.\");\r\n            console.log(error);\r\n        }\r\n        favorites = result;\r\n        client.query('SELECT * FROM room ORDER BY recommend DESC, number ASC', function(error, result2, fields) {\r\n            if(error) {\r\n                console.log(\"MySQL Failure.\");\r\n                console.log(error);\r\n            } \r\n            room = result2;\r\n            res.render('page/index', { title: '메인화면::::', whoami: req.session.user, room: room, favorites: favorites });\r\n        });\r\n    });\r\n};\r\n\r\n"],[0,"expo"]],"start1":1585,"start2":1585,"length1":804,"length2":8}]],"length":17732,"saved":false}
